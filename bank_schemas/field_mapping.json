{
  "field_mappings": {
    "date": {
      "revolut": "Completed Date",
      "aib": "Posted Transactions Date",
      "boi": "Date",
      "notes": "Revolut uses ISO datetime format (YYYY-MM-DD HH:MM:SS), AIB and BOI use date format (DD/MM/YYYY). Use Completed Date for Revolut, Posted Transactions Date for AIB, Date for BOI."
    },
    "description": {
      "revolut": "Description",
      "aib": ["Description1", "Description2", "Description3"],
      "boi": "Details",
      "notes": "For AIB, concatenate Description1 + Description2 + Description3 (with spaces) to get full description. Description2 and Description3 may be empty. For BOI, use Details field directly."
    },
    "amount": {
      "revolut": "Amount",
      "aib": ["Debit Amount", "Credit Amount"],
      "boi": ["Debit", "Credit"],
      "notes": "Revolut uses single Amount field (negative for debits, positive for credits). AIB and BOI use separate Debit and Credit fields (one will be empty). For AIB/BOI: if Debit exists, use negative value; if Credit exists, use positive value. Remove commas from amounts."
    },
    "currency": {
      "revolut": "Currency",
      "aib": "Posted Currency",
      "boi": "EUR",
      "notes": "Revolut and AIB have explicit currency fields. BOI typically uses EUR (default)."
    },
    "balance": {
      "revolut": "Balance",
      "aib": "Balance",
      "boi": "Balance",
      "notes": "All represent account balance after transaction. May be negative or empty (BOI may have empty balance for some rows)."
    },
    "transaction_type": {
      "revolut": "Type",
      "aib": "Transaction Type",
      "boi": null,
      "notes": "Revolut uses values like 'CARD_PAYMENT', 'EXCHANGE', 'TRANSFER'. AIB uses values like 'Debit', 'Credit', 'Direct Debit'. BOI does not have an explicit transaction type field - infer from Debit/Credit fields."
    }
  },
  "detection_rules": {
    "revolut": {
      "required_columns": ["Type", "Product", "Started Date", "Completed Date", "Description", "Amount", "Fee", "Currency", "State", "Balance"],
      "unique_identifiers": [
        "Type",
        "Started Date",
        "Completed Date"
      ],
      "file_pattern": "account-statement_*.csv"
    },
    "aib": {
      "required_columns": ["Posted Account", "Posted Transactions Date", "Description1", "Description2", "Description3", "Debit Amount", "Credit Amount", "Balance", "Posted Currency", "Transaction Type", "Local Currency Amount", "Local Currency"],
      "unique_identifiers": [
        "Posted Account",
        "Posted Transactions Date",
        "Description1"
      ],
      "file_pattern": "Transaction_Export_*.csv"
    },
    "boi": {
      "required_columns": ["Date", "Details", "Debit", "Credit", "Balance"],
      "unique_identifiers": [
        "Date",
        "Details"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "BOI has the simplest format. Check for Date, Details, Debit, Credit, Balance columns. If file doesn't match Revolut or AIB patterns, and has these 5 columns, it's likely BOI."
    }
  },
  "processing_notes": {
    "revolut": {
      "date_parsing": "Parse as ISO datetime: YYYY-MM-DD HH:MM:SS. Extract date portion if only date needed.",
      "amount_parsing": "Amount is already signed (negative for debits, positive for credits). Use as-is.",
      "description_parsing": "Use Description field directly.",
      "filtering": "Filter out transactions where Type is 'EXCHANGE' or 'TRANSFER' for subscription analysis."
    },
    "aib": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format.",
      "amount_parsing": "If Debit Amount exists and is not empty, use negative value (remove commas first). If Credit Amount exists and is not empty, use positive value (remove commas first). One will always be empty.",
      "description_parsing": "Use only Description1 field (remove prefixes like VDP-, VDC-, D/D, etc. - everything up to and including the first hyphen).",
      "filtering": "Filter out transactions where Transaction Type indicates transfers or exchanges if needed."
    },
    "boi": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format (YYYY-MM-DD).",
      "amount_parsing": "If Debit exists and is not empty, use negative value. If Credit exists and is not empty, use positive value. One will always be empty.",
      "description_parsing": "Use Details field directly. Trim whitespace.",
      "filtering": "No explicit transaction type field. Filter based on description patterns if needed (e.g., 'SEPA DD' for direct debits, 'FEE:' for fees)."
    }
  }
}

