{
  "field_mappings": {
    "date": {
      "revolut": "Completed Date",
      "aib": "Posted Transactions Date",
      "boi": "Date",
      "n26": "Booking Date",
      "bunq": "Date",
      "nationwide": "Date",
      "ptsb": "Date",
      "notes": "Revolut uses ISO datetime format (YYYY-MM-DD HH:MM:SS), AIB, BOI, Nationwide, and PTSB use date format (DD/MM/YYYY). N26 and BUNQ use ISO date format (YYYY-MM-DD). Use Completed Date for Revolut, Posted Transactions Date for AIB, Date for BOI/BUNQ/Nationwide/PTSB, Booking Date for N26."
    },
    "description": {
      "revolut": "Description",
      "aib": ["Description1", "Description2", "Description3"],
      "boi": "Details",
      "n26": "Partner Name",
      "bunq": "Name",
      "nationwide": "Description",
      "ptsb": "Payee",
      "notes": "For AIB, use only Description1 (prefixes removed). For BOI, use Details field directly. For N26, use Partner Name field directly. For BUNQ, use Name field directly. For Nationwide, use Description field directly. For PTSB, use Payee field directly."
    },
    "amount": {
      "revolut": "Amount",
      "aib": ["Debit Amount", "Credit Amount"],
      "boi": ["Debit", "Credit"],
      "n26": "Amount (EUR)",
      "bunq": "Amount",
      "nationwide": ["Paid out", "Paid in"],
      "ptsb": ["Outflow", "Inflow"],
      "notes": "Revolut, N26, and BUNQ use single Amount field (negative for debits, positive for credits). AIB, BOI, Nationwide, and PTSB use separate Debit/Credit or Paid out/Paid in or Outflow/Inflow fields (one will be empty). For AIB/BOI/Nationwide/PTSB: if Debit/Paid out/Outflow exists, use negative value; if Credit/Paid in/Inflow exists, use positive value. Remove commas from amounts. Note: Nationwide amounts are in GBP, PTSB amounts are in EUR."
    },
    "currency": {
      "revolut": "Currency",
      "aib": "Posted Currency",
      "boi": "EUR",
      "n26": "EUR",
      "bunq": "EUR",
      "nationwide": "GBP",
      "ptsb": "EUR",
      "notes": "Revolut and AIB have explicit currency fields. BOI, N26, BUNQ, and PTSB typically use EUR (default). Nationwide is a UK bank and uses GBP (British Pounds). N26 exports show amounts in EUR in 'Amount (EUR)' field."
    },
    "balance": {
      "revolut": "Balance",
      "aib": "Balance",
      "boi": "Balance",
      "notes": "All represent account balance after transaction. May be negative or empty (BOI may have empty balance for some rows)."
    },
    "transaction_type": {
      "revolut": "Type",
      "aib": "Transaction Type",
      "boi": null,
      "n26": "Type",
      "notes": "Revolut uses values like 'CARD_PAYMENT', 'EXCHANGE', 'TRANSFER'. AIB uses values like 'Debit', 'Credit', 'Direct Debit'. N26 uses values like 'Presentment', 'Debit Transfer', 'Credit Transfer', 'Direct Debit', 'Fee'. BOI does not have an explicit transaction type field - infer from Debit/Credit fields."
    }
  },
  "detection_rules": {
    "revolut": {
      "required_columns": ["Type", "Product", "Started Date", "Completed Date", "Description", "Amount", "Fee", "Currency", "State", "Balance"],
      "unique_identifiers": [
        "Type",
        "Started Date",
        "Completed Date"
      ],
      "file_pattern": "account-statement_*.csv"
    },
    "aib": {
      "required_columns": ["Posted Account", "Posted Transactions Date", "Description1", "Description2", "Description3", "Debit Amount", "Credit Amount", "Balance", "Posted Currency", "Transaction Type", "Local Currency Amount", "Local Currency"],
      "unique_identifiers": [
        "Posted Account",
        "Posted Transactions Date",
        "Description1"
      ],
      "file_pattern": "Transaction_Export_*.csv"
    },
    "boi": {
      "required_columns": ["Date", "Details", "Debit", "Credit", "Balance"],
      "unique_identifiers": [
        "Date",
        "Details"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "BOI has the simplest format. Check for Date, Details, Debit, Credit, Balance columns. If file doesn't match Revolut or AIB patterns, and has these 5 columns, it's likely BOI."
    },
    "n26": {
      "required_columns": ["Booking Date", "Value Date", "Partner Name", "Type", "Account Name", "Amount (EUR)"],
      "unique_identifiers": [
        "Booking Date",
        "Value Date",
        "Partner Name"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "N26 format has 'Booking Date', 'Value Date', 'Partner Name', 'Amount (EUR)' columns. Type column includes values like 'Presentment', 'Debit Transfer', 'Credit Transfer', 'Direct Debit', 'Fee'."
    },
    "bunq": {
      "required_columns": ["Date", "Interest Date", "Amount", "Account", "Name", "Description"],
      "unique_identifiers": [
        "Date",
        "Interest Date",
        "Amount",
        "Name"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "BUNQ format has 'Date', 'Interest Date', 'Amount', 'Account', 'Counterparty', 'Name', 'Description' columns. Amount is signed (negative for debits, positive for credits). Dates are in ISO format (YYYY-MM-DD)."
    },
    "nationwide": {
      "required_columns": ["Date", "Type", "Description", "Paid out", "Paid in", "Balance"],
      "unique_identifiers": [
        "Date",
        "Type",
        "Description"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "Nationwide format has 'Date', 'Type', 'Description', 'Paid out', 'Paid in', 'Balance' columns. Paid out is for debits, Paid in is for credits (one will be empty). Dates are in DD/MM/YYYY format. Amounts are in GBP (British Pounds)."
    },
    "ptsb": {
      "required_columns": ["Date", "Payee", "Outflow", "Inflow", "Running Balance"],
      "unique_identifiers": [
        "Date",
        "Payee"
      ],
      "file_pattern": "*.csv",
      "detection_notes": "PTSB format has 'Date', 'Payee', 'Outflow', 'Inflow', 'Running Balance' columns. Outflow is for debits, Inflow is for credits (one will be empty). Dates are in DD/MM/YYYY format. Amounts are in EUR (Euros)."
    }
  },
  "processing_notes": {
    "revolut": {
      "date_parsing": "Parse as ISO datetime: YYYY-MM-DD HH:MM:SS. Extract date portion if only date needed.",
      "amount_parsing": "Amount is already signed (negative for debits, positive for credits). Use as-is.",
      "description_parsing": "Use Description field directly.",
      "filtering": "Filter out transactions where Type is 'EXCHANGE' or 'TRANSFER' for subscription analysis."
    },
    "aib": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format.",
      "amount_parsing": "If Debit Amount exists and is not empty, use negative value (remove commas first). If Credit Amount exists and is not empty, use positive value (remove commas first). One will always be empty.",
      "description_parsing": "Use only Description1 field (remove prefixes like VDP-, VDC-, D/D, etc. - everything up to and including the first hyphen).",
      "filtering": "Filter out transactions where Transaction Type indicates transfers or exchanges if needed."
    },
    "boi": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format (YYYY-MM-DD).",
      "amount_parsing": "If Debit exists and is not empty, use negative value. If Credit exists and is not empty, use positive value. One will always be empty.",
      "description_parsing": "Use Details field directly. Trim whitespace.",
      "filtering": "No explicit transaction type field. Filter based on description patterns if needed (e.g., 'SEPA DD' for direct debits, 'FEE:' for fees)."
    },
    "n26": {
      "date_parsing": "Parse as ISO date format: YYYY-MM-DD. Use Booking Date field.",
      "amount_parsing": "Amount (EUR) is already signed (negative for debits, positive for credits). Use as-is.",
      "description_parsing": "Use Partner Name field directly. Trim whitespace.",
      "filtering": "Filter out internal transfers where Partner Name is 'Main Account' and Type is 'Debit Transfer' or 'Credit Transfer' for subscription analysis."
    },
    "bunq": {
      "date_parsing": "Parse as ISO date format: YYYY-MM-DD. Use Date field.",
      "amount_parsing": "Amount is already signed (negative for debits, positive for credits). Use as-is.",
      "description_parsing": "Use Name field directly. Trim whitespace.",
      "filtering": "No explicit transaction type field. Filter based on description patterns if needed."
    },
    "nationwide": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format (YYYY-MM-DD).",
      "amount_parsing": "If Paid out exists and is not empty, use negative value. If Paid in exists and is not empty, use positive value. One will always be empty. Remove commas from amounts. Note: amounts are in GBP.",
      "description_parsing": "Use Description field directly. Trim whitespace.",
      "filtering": "Type field includes values like 'Direct Debit', 'Card Payment', 'Faster Payment'. Filter based on Type if needed."
    },
    "ptsb": {
      "date_parsing": "Parse as DD/MM/YYYY format. Convert to standard date format (YYYY-MM-DD).",
      "amount_parsing": "If Outflow exists and is not empty, use negative value. If Inflow exists and is not empty, use positive value. One will always be empty. Remove commas from amounts. Note: amounts are in EUR.",
      "description_parsing": "Use Payee field directly. Trim whitespace.",
      "filtering": "No explicit transaction type field. Filter based on Payee patterns if needed."
    }
  }
}

